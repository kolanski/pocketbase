{
  "name": "admin-panel",
  "code": "const books = $app.findRecordsByFilter('books', '', '-created', 100, 0);\nconst orders = $app.findRecordsByFilter('orders', '', '-created', 100, 0);\n\nconst html = `\n<!DOCTYPE html>\n<html>\n<head>\n    <title>üìä Admin Panel - Bookstore</title>\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n    <style>\n        * { margin: 0; padding: 0; box-sizing: border-box; }\n        body {\n            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n            background: #f5f6fa;\n            padding: 20px;\n        }\n        .container {\n            max-width: 1400px;\n            margin: 0 auto;\n        }\n        .header {\n            background: linear-gradient(135deg, #e74c3c, #c0392b);\n            color: white;\n            padding: 20px 30px;\n            border-radius: 10px;\n            margin-bottom: 30px;\n            text-align: center;\n        }\n        .stats {\n            display: grid;\n            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\n            gap: 20px;\n            margin-bottom: 30px;\n        }\n        .stat-card {\n            background: white;\n            padding: 20px;\n            border-radius: 10px;\n            box-shadow: 0 2px 10px rgba(0,0,0,0.1);\n            text-align: center;\n        }\n        .stat-number {\n            font-size: 2em;\n            font-weight: bold;\n            color: #e74c3c;\n        }\n        .stat-label {\n            color: #666;\n            margin-top: 5px;\n        }\n        .section {\n            background: white;\n            padding: 30px;\n            border-radius: 10px;\n            box-shadow: 0 2px 10px rgba(0,0,0,0.1);\n            margin-bottom: 30px;\n        }\n        .section h2 {\n            color: #2c3e50;\n            margin-bottom: 20px;\n            border-bottom: 2px solid #e74c3c;\n            padding-bottom: 10px;\n        }\n        table {\n            width: 100%;\n            border-collapse: collapse;\n            margin-top: 20px;\n        }\n        th, td {\n            padding: 12px;\n            text-align: left;\n            border-bottom: 1px solid #ddd;\n        }\n        th {\n            background: #f8f9fa;\n            font-weight: bold;\n            color: #2c3e50;\n        }\n        .status {\n            padding: 4px 12px;\n            border-radius: 20px;\n            font-size: 0.8em;\n            font-weight: bold;\n        }\n        .status-pending { background: #ffeaa7; color: #d63031; }\n        .status-processing { background: #74b9ff; color: white; }\n        .status-shipped { background: #55a3ff; color: white; }\n        .status-delivered { background: #00b894; color: white; }\n        .status-cancelled { background: #636e72; color: white; }\n        .nav {\n            background: #2c3e50;\n            padding: 15px 30px;\n            border-radius: 10px;\n            margin-bottom: 20px;\n        }\n        .nav a {\n            color: white;\n            text-decoration: none;\n            margin-right: 20px;\n            padding: 10px 15px;\n            border-radius: 5px;\n            transition: background 0.3s;\n        }\n        .nav a:hover {\n            background: #34495e;\n        }\n        .action-btn {\n            padding: 6px 12px;\n            border: none;\n            border-radius: 4px;\n            cursor: pointer;\n            font-size: 0.8em;\n            margin: 2px;\n            transition: background 0.3s;\n        }\n        .btn-success { background: #27ae60; color: white; }\n        .btn-warning { background: #f39c12; color: white; }\n        .btn-danger { background: #e74c3c; color: white; }\n        .btn-info { background: #3498db; color: white; }\n    </style>\n</head>\n<body>\n    <div class=\"container\">\n        <div class=\"nav\">\n            <a href=\"/bookstore\">üè† Back to Store</a>\n            <a href=\"/admin\">‚öôÔ∏è Admin Panel</a>\n            <a href=\"/api/collections/books/records\">üìö Books API</a>\n            <a href=\"/api/collections/orders/records\">üì¶ Orders API</a>\n        </div>\n        \n        <div class=\"header\">\n            <h1>üìä Admin Dashboard</h1>\n            <p>Manage your bookstore inventory and orders</p>\n        </div>\n        \n        <div class=\"stats\">\n            <div class=\"stat-card\">\n                <div class=\"stat-number\">${books.length}</div>\n                <div class=\"stat-label\">Total Books</div>\n            </div>\n            <div class=\"stat-card\">\n                <div class=\"stat-number\">${books.reduce((sum, book) => sum + book.stock, 0)}</div>\n                <div class=\"stat-label\">Total Stock</div>\n            </div>\n            <div class=\"stat-card\">\n                <div class=\"stat-number\">${orders.length}</div>\n                <div class=\"stat-label\">Total Orders</div>\n            </div>\n            <div class=\"stat-card\">\n                <div class=\"stat-number\">${orders.filter(o => o.status === 'pending').length}</div>\n                <div class=\"stat-label\">Pending Orders</div>\n            </div>\n        </div>\n        \n        <div class=\"section\">\n            <h2>üì¶ Recent Orders</h2>\n            <table>\n                <thead>\n                    <tr>\n                        <th>Order ID</th>\n                        <th>Customer</th>\n                        <th>Total</th>\n                        <th>Status</th>\n                        <th>Created</th>\n                        <th>Actions</th>\n                    </tr>\n                </thead>\n                <tbody>\n                    ${orders.slice(0, 10).map(order => `\n                        <tr>\n                            <td>${order.id.slice(0, 8)}...</td>\n                            <td>${order.expand?.customer?.name || 'Unknown'}</td>\n                            <td>$${order.total_amount}</td>\n                            <td><span class=\"status status-${order.status}\">${order.status}</span></td>\n                            <td>${new Date(order.created).toLocaleDateString()}</td>\n                            <td>\n                                <button class=\"action-btn btn-info\" onclick=\"viewOrder('${order.id}')\">View</button>\n                                <button class=\"action-btn btn-warning\" onclick=\"updateStatus('${order.id}', 'processing')\">Process</button>\n                                <button class=\"action-btn btn-success\" onclick=\"updateStatus('${order.id}', 'shipped')\">Ship</button>\n                            </td>\n                        </tr>\n                    `).join('')}\n                </tbody>\n            </table>\n        </div>\n        \n        <div class=\"section\">\n            <h2>üìö Book Inventory</h2>\n            <table>\n                <thead>\n                    <tr>\n                        <th>Title</th>\n                        <th>Author</th>\n                        <th>Category</th>\n                        <th>Price</th>\n                        <th>Stock</th>\n                        <th>Actions</th>\n                    </tr>\n                </thead>\n                <tbody>\n                    ${books.slice(0, 10).map(book => `\n                        <tr>\n                            <td><strong>${book.title}</strong></td>\n                            <td>${book.author}</td>\n                            <td>${book.category}</td>\n                            <td>$${book.price}</td>\n                            <td>${book.stock}</td>\n                            <td>\n                                <button class=\"action-btn btn-info\" onclick=\"editBook('${book.id}')\">Edit</button>\n                                <button class=\"action-btn btn-warning\" onclick=\"updateStock('${book.id}')\">Update Stock</button>\n                            </td>\n                        </tr>\n                    `).join('')}\n                </tbody>\n            </table>\n        </div>\n    </div>\n    \n    <script>\n        function viewOrder(orderId) {\n            alert('Viewing order: ' + orderId + '. In a real app, this would show order details.');\n        }\n        \n        function updateStatus(orderId, newStatus) {\n            if (confirm('Update order status to: ' + newStatus + '?')) {\n                alert('Order status updated! In a real app, this would call the API.');\n            }\n        }\n        \n        function editBook(bookId) {\n            alert('Editing book: ' + bookId + '. In a real app, this would open an edit form.');\n        }\n        \n        function updateStock(bookId) {\n            const newStock = prompt('Enter new stock quantity:');\n            if (newStock !== null && newStock !== '') {\n                alert('Stock updated to: ' + newStock + '. In a real app, this would call the API.');\n            }\n        }\n    </script>\n</body>\n</html>\n`;\n\nreturn {\n    body: html,\n    headers: { 'Content-Type': 'text/html' },\n    status: 200\n};",
  "enabled": true,
  "timeout": 5000,
  "triggers": {
    "type": "http", 
    "method": "GET", 
    "path": "/admin"
  },
  "contentType": "text/html",
  "description": "Admin panel for managing books and orders"
}
